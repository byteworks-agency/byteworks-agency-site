---
import Base from "../../layouts/Base.astro";
import { en as t } from "../../i18n/en";

const number = import.meta.env.PUBLIC_WAPP_NUMBER || '';
const baseMsg = import.meta.env.PUBLIC_WAPP_MESSAGE || 'Hello%20ByteWorks';
const wa = `https://wa.me/${number}?text=${baseMsg}`;
---

<Base lang="en" t={t} title="Contact — ByteWorks" description="Tell us about your project. We'll reply on WhatsApp.">
  <section class="max-w-3xl mx-auto px-4 py-16">
    <h1 class="text-3xl font-semibold font-display">Contact</h1>
    <p class="text-neutral-600 dark:text-neutral-300 mt-2">Tell us what you need and we’ll answer via WhatsApp.</p>

    <form class="mt-6 grid gap-4" onsubmit="event.preventDefault();openWA(this)">
      <input name="name" placeholder="Your name" required class="bg-white/50 dark:bg-neutral-900/40 border border-neutral-200 dark:border-neutral-800 rounded-md px-3 py-2" />
      <input name="business" placeholder="Business name (optional)" class="bg-white/50 dark:bg-neutral-900/40 border border-neutral-200 dark:border-neutral-800 rounded-md px-3 py-2" />
      <select name="plan" class="bg-white/50 dark:bg-neutral-900/40 border border-neutral-200 dark:border-neutral-800 rounded-md px-3 py-2">
        <option>Start</option><option>Pro</option><option>Elite</option><option>E-Commerce Pro</option><option>Just a question</option>
      </select>
      <textarea name="details" placeholder="Briefly describe your goal…" rows="4" class="bg-white/50 dark:bg-neutral-900/40 border border-neutral-200 dark:border-neutral-800 rounded-md px-3 py-2"></textarea>
      <button class="px-4 py-2 rounded-md bg-brand text-black font-medium w-fit">Send via WhatsApp</button>
    </form>

    <script is:inline>
      const base = { wa: `${wa}` };
      function openWA(form) {
        const d = new FormData(form);
        const txt = ` — Name: ${d.get('name')} | Business: ${d.get('business')||'-'} | Plan: ${d.get('plan')} | Details: ${d.get('details')||'-'}`;
        const url = base.wa + encodeURIComponent(txt);
        window.open(url, '_blank');
      }
    </script>
  </section>
</Base>