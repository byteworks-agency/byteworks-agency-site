---
interface Props {
  lang?: 'en' | 'es';
  title?: string;
  description?: string;
}
const { lang = 'en', title, description } = Astro.props;

const t = lang === 'es'
  ? {
      h: title ?? 'Planes claros, resultados reales',
      p: description ?? 'Elige el plan que mejor se adapte a tu negocio. Todos incluyen dominio, hosting y mantenimiento.',
      month: '/mes',
      yearSave: '(ahorra 15%)',
      btn: 'Empezar',
      features: {
        start: [
          'One-page profesional, responsive',
          'Botón de WhatsApp',
          'Formulario de contacto funcional',
          'SEO local básico',
          'Dominio, hosting y mantenimiento',
          '1 actualización mensual',
          'Soporte 100 % por WhatsApp',
          'SSL, backups y monitoreo básico'
        ],
        pro: [
          'Hasta 5 secciones/páginas',
          'Diseño alineado a tu marca',
          'Formularios avanzados (cotización/reserva)',
          'Envío de formularios a WhatsApp',
          'SEO optimizado en todas las páginas',
          '2 actualizaciones mensuales',
          'Soporte y seguimiento por WhatsApp'
        ],
        elite: [
          'Hasta 8 páginas personalizadas',
          'Automatizaciones con Google (Sheets, Forms, Drive, Analytics)',
          'Notificaciones por WhatsApp',
          'Panel de métricas en Analytics',
          'Optimización mensual (velocidad, seguridad, SEO)',
          'Soporte prioritario (24–48 h)',
          '4 actualizaciones mensuales'
        ],
        ecommerce: [
          'Hasta 10 páginas (Inicio, Tienda, Productos, Contacto...)',
          'Hasta 100 productos y categorías',
          'Carrito y checkout manual',
          'Flujos de pago internos (sin pasarelas externas)',
          'Gestión de pedidos con tracking por WhatsApp',
          'Cuentas de cliente y login',
          'SEO básico en productos',
          'Gestión por ByteWorks (autogestión opcional)'
        ]
      }
    }
  : {
      h: title ?? 'Clear plans, real results',
      p: description ?? 'Pick the plan that fits your stage. All include domain, hosting and maintenance.',
      month: '/month',
      yearSave: '(save 15%)',
      btn: 'Get started',
      features: {
        start: [
          'Professional one-page, responsive',
          'WhatsApp button',
          'Working contact form',
          'Basic local SEO',
          'Domain, hosting & maintenance',
          '1 monthly update',
          'WhatsApp-based support',
          'SSL, backups & basic monitoring'
        ],
        pro: [
          'Up to 5 sections/pages',
          'Brand-aligned design',
          'Advanced forms (quotes/bookings)',
          'Form sends to WhatsApp',
          'SEO optimized on all pages',
          '2 monthly updates',
          'Support & follow-up on WhatsApp'
        ],
        elite: [
          'Up to 8 custom pages',
          'Google automations (Sheets, Forms, Drive, Analytics)',
          'WhatsApp notifications',
          'Analytics metrics dashboard',
          'Monthly optimization (speed, security, SEO)',
          'Priority support (24–48h)',
          '4 monthly updates'
        ],
        ecommerce: [
          'Up to 10 pages (Home, Shop, Products, Contact...)',
          'Up to 100 products & categories',
          'Cart & manual checkout',
          'Internal payment flows (no external gateways)',
          'Order panel with WhatsApp confirmations',
          'Customer accounts & login',
          'Basic product SEO',
          'Managed by ByteWorks (self-manage optional)'
        ]
      }
    };

const plans = [
  { key: 'start',  name: 'Start',  priceM: 45,  priceY: 459,  icon: '/icons/start.svg' },
  { key: 'pro',    name: 'Pro',    priceM: 55,  priceY: 561,  icon: '/icons/pro.svg' },
  { key: 'elite',  name: 'Elite',  priceM: 70,  priceY: 714,  icon: '/icons/elite.svg' },
  { key: 'ecommerce', name: 'E-Commerce Pro', priceM: 95, priceY: 969, icon: '/icons/ecommerce.svg' },
];
---

<section id="plans" class="section">
  <div class="container">
    <header class="text-center max-w-2xl mx-auto mb-10">
      <h2 class="font-display text-3xl sm:text-4xl font-extrabold">{t.h}</h2>
      <p class="mt-3 text-neutral-600 dark:text-neutral-300">{t.p}</p>
    </header>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
      {plans.map((p) => (
        <article class="rounded-2xl border border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-950 p-6 flex flex-col">
          <div class="flex items-center gap-3">
            <img src={p.icon} alt="" width="28" height="28" class="opacity-90 dark:opacity-100" />
            <h3 class="font-display font-semibold text-lg">{p.name}</h3>
          </div>

          <div class="mt-4">
            <div class="text-2xl font-bold">${p.priceM}<span class="text-sm font-normal text-neutral-500">{t.month}</span></div>
            <div class="text-sm text-neutral-600 dark:text-neutral-300">${p.priceY} <span class="opacity-75">{t.yearSave}</span></div>
          </div>

          <ul class="mt-4 space-y-2 text-sm text-neutral-700 dark:text-neutral-300">
            {t.features[p.key as keyof typeof t.features].map((f) => (
              <li class="flex items-start gap-2">
                <img src="/icons/check.svg" alt="" width="18" height="18" class="mt-0.5 opacity-90 dark:opacity-100" />
                <span>{f}</span>
              </li>
            ))}
          </ul>

          <a href={lang === 'es' ? '/es/contact' : '/en/contact'} class="mt-6 inline-block text-center px-4 py-2 rounded-md bg-brand text-black font-medium hover:opacity-90 transition">{t.btn}</a>
        </article>
      ))}
    </div>
  </div>
</section>
