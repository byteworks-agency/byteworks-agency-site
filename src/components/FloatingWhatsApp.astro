---
interface Props { lang?: 'en' | 'es' }
const lang = (Astro.props.lang as 'en' | 'es') ?? 'en';

const WAPP = import.meta.env.PUBLIC_WAPP_NUMBER;
const MSG  = import.meta.env.PUBLIC_WAPP_MESSAGE || (lang === 'es' ? 'Hola%20ByteWorks' : 'Hello%20ByteWorks');
const href = WAPP ? `https://wa.me/${WAPP}?text=${MSG}` : null;
---

{href && (
  <a
    href={href}
    target="_blank"
    rel="noopener noreferrer"
    class="fixed bottom-4 right-4 z-50 inline-flex items-center gap-2 px-4 h-12 rounded-full shadow-lg bg-white text-neutral-900 dark:bg-neutral-900 dark:text-white border border-neutral-200 dark:border-neutral-700 hover:scale-105 transition"
    aria-label={lang === 'es' ? 'Chatear por WhatsApp' : 'Chat on WhatsApp'}
  >
    <svg viewBox="0 0 24 24" aria-hidden="true" class="w-5 h-5" fill="currentColor">
      <path d="M20.52 3.48A11.94 11.94 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.1.55 4.1 1.6 5.9L.04 24l6.26-1.62A11.93 11.93 0 0 0 12 24c6.63 0 12-5.37 12-12 0-3.2-1.25-6.22-3.48-8.52ZM12 21.6c-1.86 0-3.66-.5-5.23-1.46l-.37-.22-3.72.96.99-3.62-.24-.37A9.6 9.6 0 1 1 21.6 12c0 5.3-4.3 9.6-9.6 9.6Zm5.47-6.98c-.3-.15-1.76-.86-2.03-.96-.27-.1-.46-.15-.66.15-.2.3-.76.96-.94 1.16-.17.2-.35.22-.65.07-.3-.15-1.24-.46-2.36-1.48-.87-.77-1.46-1.72-1.62-2.02-.17-.3-.02-.46.13-.61.13-.13.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37-.03-.52-.08-.15-.66-1.58-.9-2.17-.24-.58-.48-.5-.66-.5h-.56c-.2 0-.52.08-.8.37-.27.3-1.04 1.02-1.04 2.5 0 1.48 1.07 2.92 1.22 3.12.15.2 2.1 3.2 5.08 4.48.71.31 1.27.5 1.7.64.71.23 1.36.2 1.87.12.57-.08 1.76-.72 2.01-1.42.25-.7.25-1.3.18-1.42-.08-.12-.27-.2-.57-.35Z"/>
    </svg>
    <span class="text-sm font-medium">{lang === 'es' ? 'Chatear por WhatsApp' : 'Chat on WhatsApp'}</span>
  </a>
)}