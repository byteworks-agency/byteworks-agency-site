---
const { lang = "en" } = Astro.props;
const isEN = lang === "en";

const links = isEN
  ? [
      { href: "/en/", label: "Home" },
      { href: "/en/about", label: "About" },
      { href: "/en/contact", label: "Contact" },
      { href: "/en/#plans", label: "Plans" },
    ]
  : [
      { href: "/es/", label: "Inicio" },
      { href: "/es/about", label: "Sobre nosotros" },
      { href: "/es/contact", label: "Contacto" },
      { href: "/es/#plans", label: "Planes" },
    ];

const toggleLang = isEN ? "es" : "en";
---

<nav class="border-b border-neutral-200/70 dark:border-neutral-800 sticky top-0 backdrop-blur bg-white/75 dark:bg-neutral-950/70 z-50">
  <div class="container flex items-center justify-between h-16">
    <!-- Logo + nombre -->
    <a href={isEN ? "/en/" : "/es/"} class="flex items-center gap-2">
      <img src="/logo-light.png" alt="ByteWorks Logo" class="h-7 w-auto dark:hidden" />
      <img src="/logo-dark.png" alt="ByteWorks Logo" class="h-7 w-auto hidden dark:block" />
      <span class="font-display font-semibold text-lg">ByteWorks</span>
    </a>

    <!-- Desktop menu -->
    <ul class="hidden md:flex items-center gap-6 text-sm">
      {links.map((link) => (
        <li>
          <a
            href={link.href}
            class="hover:text-brand transition-colors duration-200"
          >
            {link.label}
          </a>
        </li>
      ))}
      <li>
        <button
          onclick={`location.href='/?lang=${toggleLang}'`}
          class="px-3 py-1 border border-neutral-300 dark:border-neutral-700 rounded-md text-sm"
        >
          {isEN ? "ES" : "EN"}
        </button>
      </li>
    </ul>

    <!-- Mobile hamburger -->
    <button
      id="menu-toggle"
      class="md:hidden p-2 rounded-md border border-neutral-300 dark:border-neutral-700"
    >
      <img src="/icons/menu.svg" alt="Menu" class="h-5 w-5 dark:invert" />
    </button>
  </div>

  <!-- Mobile menu dropdown -->
  <div id="mobile-menu" class="hidden flex-col gap-4 items-start px-6 py-4 bg-white dark:bg-neutral-950 border-t border-neutral-200 dark:border-neutral-800 md:hidden">
    {links.map((link) => (
      <a href={link.href} class="text-sm hover:text-brand transition-colors duration-200">
        {link.label}
      </a>
    ))}
    <button
      onclick={`location.href='/?lang=${toggleLang}'`}
      class="px-3 py-1 border border-neutral-300 dark:border-neutral-700 rounded-md text-sm"
    >
      {isEN ? "ES" : "EN"}
    </button>
  </div>

  <script is:inline>
    const btn = document.getElementById('menu-toggle');
    const menu = document.getElementById('mobile-menu');

    btn?.addEventListener('click', () => {
      menu.classList.toggle('hidden');
    });
  </script>
</nav>
